{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Jorge da Silva\\\\Desktop\\\\stripe-payment\\\\stripe-payment\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Jorge da Silva\\\\Desktop\\\\stripe-payment\\\\stripe-payment\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Jorge da Silva\\\\Desktop\\\\stripe-payment\\\\stripe-payment\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Jorge da Silva\\\\Desktop\\\\stripe-payment\\\\stripe-payment\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Jorge da Silva\\\\Desktop\\\\stripe-payment\\\\stripe-payment\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Jorge da Silva\\\\Desktop\\\\stripe-payment\\\\stripe-payment\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Jorge da Silva\\\\Desktop\\\\stripe-payment\\\\stripe-payment\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Jorge da Silva\\\\Desktop\\\\stripe-payment\\\\stripe-payment\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{CardNumberElement,CardExpiryElement,CardCvcElement,injectStripe}from'react-stripe-elements';var PaymentForm=/*#__PURE__*/function(_Component){_inherits(PaymentForm,_Component);function PaymentForm(props){var _this;_classCallCheck(this,PaymentForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(PaymentForm).call(this,props));_this.onEmail=function(event){var re=/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;if(re.test(event.target.value)){_this.setState({email:event.target.value,emailWarn:false});console.log(\"this e-mails is indeed valid\");}else{_this.setState({emailWarn:true});}};_this.onReturn=function(event){_this.setState({error:\"\",emailWarn:false});};_this.state={complete:false,error:false,token:\"\",email:\"\",emailWarn:false,emailIsValid:\"\"};_this.submit=_this.submit.bind(_assertThisInitialized(_this));return _this;}_createClass(PaymentForm,[{key:\"submit\",value:function(){var _submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ev){var _this2=this;var _ref,token,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!this.state.email){this.setState({emailWarn:true});}_context.next=3;return this.props.stripe.createToken({name:\"NOL\"});case 3:_ref=_context.sent;token=_ref.token;if(!(token&&!this.state.emailWarn)){_context.next=13;break;}_context.next=8;return fetch(\"https://safe-springs-05829.herokuapp.com/charge\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({'token':token.id,'email':this.state.email})});case 8:response=_context.sent;if(response.ok)this.setState({token:{token:token},email:this.state.email});if(response.ok)this.setState({complete:true});_context.next=14;break;case 13:fetch('https://safe-springs-05829.herokuapp.com/error',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({error:\"true\"})}).then(function(response){return response.json();}).then(function(data){_this2.setState({error:data});});case 14:;case 15:case\"end\":return _context.stop();}}},_callee,this);}));function submit(_x){return _submit.apply(this,arguments);}return submit;}()},{key:\"render\",value:function render(){if(this.state.complete)return React.createElement(\"div\",{className:\"SuccessMessage\"},React.createElement(\"h1\",null,\" Thanks for Subscribing! \"),React.createElement(\"p\",null,\"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\"));if(this.state.error)return React.createElement(\"div\",{className:\"errorMessage\"},\"Something seems to have gone wrong, make sure you have submited the correct information and try again. \",React.createElement(\"br\",null),\"If you continue getting this message, reach out to us at someemail@email.com.\",React.createElement(\"br\",null),React.createElement(\"button\",{className:\"returnBtn\",onClick:this.onReturn},\" Try again \"));return React.createElement(\"div\",{className:\"paymentForm\"},React.createElement(\"img\",{alt:\"Client Logo\",src:\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRXyLJKogQcNgoLIXK9FFT5GGP5IZctPvDh5LTcm48cCH0Kmm5q&s\",className:\"logo\"}),React.createElement(\"h3\",{className:\"subtitle\",id:\"top\"},\" Informa\\xE7\\xE3o do Cliente \"),React.createElement(\"input\",{type:\"email\",className:\"emailInput\",placeholder:\"E-mail\",onChange:this.onEmail}),React.createElement(\"h3\",{className:\"subtitle\"},\" Informa\\xE7\\xE3o do Cart\\xE3o \"),React.createElement(CardNumberElement,{className:\"cardNumber\"}),React.createElement(CardExpiryElement,{className:\"cardExpiry\"}),React.createElement(CardCvcElement,{className:\"cardCvc\"}),React.createElement(\"button\",{className:\"btn-submit\",onClick:this.submit},\"Fazer Pagamento\"));}}]);return PaymentForm;}(Component);// https://stripe.dev/react-stripe-elements/#payment-request Is this what we want? Yep confirmed.\nexport default injectStripe(PaymentForm);","map":{"version":3,"sources":["C:/Users/Jorge da Silva/Desktop/stripe-payment/stripe-payment/src/Components/PaymentForm/PaymentForm.js"],"names":["React","Component","CardNumberElement","CardExpiryElement","CardCvcElement","injectStripe","PaymentForm","props","onEmail","event","re","test","target","value","setState","email","emailWarn","console","log","onReturn","error","state","complete","token","emailIsValid","submit","bind","ev","stripe","createToken","name","fetch","method","headers","body","JSON","stringify","id","response","ok","then","json","data"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {CardNumberElement, CardExpiryElement, CardCvcElement, injectStripe} from 'react-stripe-elements';\r\n\r\nclass PaymentForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {complete: false,\r\n                error: false,\r\n                token: \"\",\r\n                email: \"\",\r\n                emailWarn: false,\r\n                emailIsValid: \"\"};\r\n    this.submit = this.submit.bind(this); \r\n  }\r\n\r\n  onEmail = (event) => {\r\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    if (re.test(event.target.value)) { \r\n      this.setState({email: event.target.value,\r\n                    emailWarn: false})\r\n      console.log(\"this e-mails is indeed valid\")\r\n    } else {\r\n      this.setState({emailWarn:true})\r\n    }\r\n  }\r\n  \r\n\r\n  async submit(ev) {\r\n    \r\n    if(!this.state.email) {\r\n      this.setState({emailWarn:true})\r\n    }\r\n\r\n    let {token} = await this.props.stripe.createToken({name: \"NOL\"});\r\n    if(token && !this.state.emailWarn) {\r\n          let response = await fetch(\"https://safe-springs-05829.herokuapp.com/charge\", {\r\n          method: \"POST\",\r\n          headers: {\"Content-Type\": \"application/json\"},\r\n          body: JSON.stringify({\r\n            'token': token.id,\r\n            'email': this.state.email\r\n          })\r\n        })\r\n        if (response.ok) this.setState({token: {token},\r\n                                        email:this.state.email})\r\n        if (response.ok) this.setState({complete: true});\r\n    } else {\r\n      fetch('https://safe-springs-05829.herokuapp.com/error', {\r\n        method: 'post',\r\n        headers: {'Content-Type':'application/json'},\r\n        body: JSON.stringify({\r\n          error: \"true\"\r\n        })\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        this.setState({error: data})\r\n      });\r\n    };\r\n}\r\n\r\n\r\n  onReturn = (event) => {\r\n    this.setState({error:\"\",\r\n           emailWarn: false})\r\n  }\r\n\r\n  render() {\r\n    if(this.state.complete) return( \r\n    <div className=\"SuccessMessage\">\r\n      <h1> Thanks for Subscribing! </h1>\r\n      <p>\r\n        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\r\n        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,\r\n        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo\r\n        consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse\r\n        cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non\r\n        proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\r\n      </p>\r\n    </div>\r\n    )\r\n    if(this.state.error) return( \r\n      <div className=\"errorMessage\">\r\n        Something seems to have gone wrong, make sure you have submited the correct information and try again. <br/>\r\n        If you continue getting this message, reach out to us at someemail@email.com.<br/>\r\n        <button className=\"returnBtn\" onClick={this.onReturn}> Try again </button>\r\n      </div>\r\n      )\r\n\r\n    return (\r\n      <div className=\"paymentForm\">\r\n        <img alt=\"Client Logo\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRXyLJKogQcNgoLIXK9FFT5GGP5IZctPvDh5LTcm48cCH0Kmm5q&s\" className=\"logo\"/>\r\n        <h3 className=\"subtitle\" id=\"top\"> Informação do Cliente </h3>\r\n        <input type=\"email\" className=\"emailInput\" placeholder=\"E-mail\" onChange={this.onEmail} />\r\n\r\n        <h3  className=\"subtitle\"> Informação do Cartão </h3>\r\n        <CardNumberElement className=\"cardNumber\"/>\r\n        <CardExpiryElement className=\"cardExpiry\"/>\r\n        <CardCvcElement className=\"cardCvc\"/>\r\n      <button className=\"btn-submit\" onClick={this.submit}>Fazer Pagamento</button>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n// https://stripe.dev/react-stripe-elements/#payment-request Is this what we want? Yep confirmed.\r\n\r\nexport default injectStripe(PaymentForm);"]},"metadata":{},"sourceType":"module"}