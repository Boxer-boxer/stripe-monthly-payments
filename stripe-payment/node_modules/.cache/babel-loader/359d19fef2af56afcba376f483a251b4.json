{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jorge da Silva\\\\Desktop\\\\stripe-payment\\\\stripe-payment\\\\src\\\\Components\\\\PaymentForm\\\\PaymentForm.js\";\nimport React, { Component } from 'react';\nimport { CardNumberElement, CardExpiryElement, CardCvcElement, injectStripe } from 'react-stripe-elements';\n\nclass PaymentForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onEmail = event => {\n      let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n      if (re.test(event.target.value)) {\n        this.setState({\n          email: event.target.value,\n          emailWarn: false\n        });\n      } else {\n        this.setState({\n          emailWarn: true\n        });\n      }\n    };\n\n    this.onReturn = event => {\n      this.setState({\n        error: \"\",\n        emailWarn: false\n      });\n    };\n\n    this.state = {\n      complete: false,\n      error: false,\n      token: \"\",\n      email: \"\",\n      emailWarn: false,\n      emailIsValid: \"\",\n      isLoading: false\n    };\n    this.submit = this.submit.bind(this);\n  }\n\n  async submit(ev) {\n    if (!this.state.email) {\n      this.setState({\n        emailWarn: true\n      });\n    }\n\n    let _ref = await this.props.stripe.createToken({\n      name: \"NOL\"\n    }),\n        token = _ref.token;\n\n    if (token && !this.state.emailWarn) {\n      this.setState({\n        isLoading: true\n      }); // loading init\n\n      let response = await fetch(\"https://safe-springs-05829.herokuapp.com/charge\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          'token': token.id,\n          'email': this.state.email\n        })\n      });\n      if (response.ok) this.setState({\n        token: {\n          token\n        },\n        email: this.state.email,\n        isLoading: false\n      }); // loading terminate\n\n      if (response.ok) this.setState({\n        complete: true\n      });\n    } else {\n      fetch('https://safe-springs-05829.herokuapp.com/error', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          error: \"true\"\n        })\n      }).then(response => response.json()).then(data => {\n        this.setState({\n          error: data\n        });\n      });\n    }\n\n    ;\n  }\n\n  render() {\n    if (this.state.complete) return React.createElement(\"div\", {\n      className: \"SuccessMessage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \" Thanks for Subscribing! \"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\"));\n    if (this.state.error) return React.createElement(\"div\", {\n      className: \"errorMessage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Something seems to have gone wrong, make sure you have submited the correct information and try again. \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), \"If you continue getting this message, reach out to us at someemail@email.com.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"returnBtn\",\n      onClick: this.onReturn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \" Try again \"));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, this.state.isLoading === false ? React.createElement(\"div\", {\n      className: \"paymentForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"Client Logo\",\n      src: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRXyLJKogQcNgoLIXK9FFT5GGP5IZctPvDh5LTcm48cCH0Kmm5q&s\",\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      className: \"subtitle\",\n      id: \"top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \" Informa\\xE7\\xE3o do Cliente \"), React.createElement(\"input\", {\n      type: \"email\",\n      className: \"emailInput\",\n      placeholder: \"E-mail\",\n      onChange: this.onEmail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      className: \"subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \" Informa\\xE7\\xE3o do Cart\\xE3o \"), React.createElement(CardNumberElement, {\n      className: \"cardNumber\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(CardExpiryElement, {\n      className: \"cardExpiry\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(CardCvcElement, {\n      className: \"cardCvc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn-submit\",\n      onClick: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Fazer Pagamento\")) : this.state.isLoading === true ? React.createElement(\"div\", {\n      class: \"loading la-ball-rotate la-dark la-2x\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \" LOADING... \"));\n  }\n\n} // https://stripe.dev/react-stripe-elements/#payment-request Is this what we want? Yep confirmed.\n\n\nexport default injectStripe(PaymentForm);","map":{"version":3,"sources":["C:/Users/Jorge da Silva/Desktop/stripe-payment/stripe-payment/src/Components/PaymentForm/PaymentForm.js"],"names":["React","Component","CardNumberElement","CardExpiryElement","CardCvcElement","injectStripe","PaymentForm","constructor","props","onEmail","event","re","test","target","value","setState","email","emailWarn","onReturn","error","state","complete","token","emailIsValid","isLoading","submit","bind","ev","stripe","createToken","name","response","fetch","method","headers","body","JSON","stringify","id","ok","then","json","data","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {CardNumberElement, CardExpiryElement, CardCvcElement, injectStripe} from 'react-stripe-elements';\r\n\r\n\r\nclass PaymentForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {complete: false,\r\n                error: false,\r\n                token: \"\",\r\n                email: \"\",\r\n                emailWarn: false,\r\n                emailIsValid: \"\",\r\n                isLoading: false}\r\n    this.submit = this.submit.bind(this); \r\n  }\r\n\r\n  onEmail = (event) => {  \r\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    if (re.test(event.target.value)) { \r\n      this.setState({email: event.target.value,\r\n                    emailWarn: false})\r\n    } else {\r\n      this.setState({emailWarn:true})\r\n    }\r\n  }\r\n\r\n \r\n  async submit(ev) {\r\n    \r\n    if(!this.state.email) {\r\n      this.setState({emailWarn:true})\r\n    }\r\n\r\n    let {token} = await this.props.stripe.createToken({name: \"NOL\"});\r\n      if(token && !this.state.emailWarn) {\r\n          this.setState({isLoading: true}) // loading init\r\n\r\n          let response = await fetch(\"https://safe-springs-05829.herokuapp.com/charge\", {\r\n            method: \"POST\",\r\n            headers: {\"Content-Type\": \"application/json\"},\r\n            body: JSON.stringify({\r\n              'token': token.id,\r\n              'email': this.state.email\r\n            }) \r\n          })\r\n          if (response.ok) this.setState({token: {token},\r\n                                          email:this.state.email,\r\n                                          isLoading: false}) // loading terminate\r\n          \r\n          if (response.ok) this.setState({complete: true});\r\n      } else {\r\n        fetch('https://safe-springs-05829.herokuapp.com/error', {\r\n          method: 'post',\r\n          headers: {'Content-Type':'application/json'},\r\n          body: JSON.stringify({\r\n            error: \"true\"\r\n          })\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          this.setState({error: data})\r\n        });\r\n    };\r\n}\r\n\r\n\r\n  onReturn = (event) => {\r\n    this.setState({error:\"\",\r\n           emailWarn: false})\r\n  }\r\n\r\n  render() {\r\n        \r\n    if(this.state.complete) return( \r\n        <div className=\"SuccessMessage\">\r\n                  <h1> Thanks for Subscribing! </h1>\r\n                  <p>\r\n                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\r\n                    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,\r\n                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo\r\n                    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse\r\n                    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non\r\n                    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\r\n                  </p>\r\n                </div>\r\n                )\r\n                if(this.state.error) return( \r\n                  <div className=\"errorMessage\">\r\n                    Something seems to have gone wrong, make sure you have submited the correct information and try again. <br/>\r\n                    If you continue getting this message, reach out to us at someemail@email.com.<br/>\r\n                    <button className=\"returnBtn\" onClick={this.onReturn}> Try again </button>\r\n                  </div>\r\n        )\r\n\r\n        return (\r\n          <div>\r\n            {this.state.isLoading === false \r\n            ?<div className=\"paymentForm\">\r\n              <img alt=\"Client Logo\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRXyLJKogQcNgoLIXK9FFT5GGP5IZctPvDh5LTcm48cCH0Kmm5q&s\" className=\"logo\"/>\r\n              <h3 className=\"subtitle\" id=\"top\"> Informação do Cliente </h3>\r\n              <input type=\"email\" className=\"emailInput\" placeholder=\"E-mail\" onChange={this.onEmail} />\r\n\r\n              <h3  className=\"subtitle\"> Informação do Cartão </h3>\r\n              <CardNumberElement className=\"cardNumber\"/>\r\n              <CardExpiryElement className=\"cardExpiry\"/>\r\n              <CardCvcElement className=\"cardCvc\"/>\r\n              <button className=\"btn-submit\" onClick={this.submit}>Fazer Pagamento</button>\r\n            </div>\r\n            :(this.state.isLoading === true\r\n              ? <div class=\"loading la-ball-rotate la-dark la-2x\">\r\n                    <div></div>\r\n                </div>\r\n              : <div> LOADING... </div>\r\n            )\r\n          }\r\n          </div>\r\n      )\r\n       \r\n  }\r\n}\r\n// https://stripe.dev/react-stripe-elements/#payment-request Is this what we want? Yep confirmed.\r\n\r\nexport default injectStripe(PaymentForm);"]},"metadata":{},"sourceType":"module"}